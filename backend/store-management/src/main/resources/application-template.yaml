# ============================================
# APPLICATION CONFIGURATION TEMPLATE
# ============================================
# Copy this file to application.yaml and fill in your sensitive information
# DO NOT commit application.yaml with real credentials to git
#
# For production, use environment variables or external config server
# ============================================

server:
  port: 8080

spring:
  application:
    name: store-management

  # ============================================
  # DATABASE CONFIGURATION
  # ============================================
  datasource:
    url: jdbc:mysql://localhost:3306/store_management
    username: root          # CHANGE THIS: Your MySQL username
    password: your_password # CHANGE THIS: Your MySQL password
    driver-class-name: com.mysql.cj.jdbc.Driver

  jpa:
    hibernate:
      ddl-auto: none
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQLDialect
        format_sql: true
    database-platform: org.hibernate.dialect.MySQL8Dialect

  # ============================================
  # FLYWAY DATABASE MIGRATION
  # ============================================
  flyway:
    enabled: true
    baseline-on-migrate: true
    locations: classpath:db/migration
    baseline-version: 0
    validate-on-migrate: false

  # ============================================
  # FILE UPLOAD CONFIGURATION
  # ============================================
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 10MB

  # ============================================
  # EMAIL CONFIGURATION (Gmail)
  # ============================================
  # Setup Instructions:
  # 1. Go to https://myaccount.google.com/security
  # 2. Enable "2-Step Verification"
  # 3. Create "App Password" at https://myaccount.google.com/apppasswords
  # 4. Use App Password (not your regular password)
  mail:
    host: smtp.gmail.com
    port: 587
    username: ${EMAIL_USERNAME:your-email@gmail.com}  # CHANGE THIS or set environment variable
    password: ${EMAIL_PASSWORD:your-app-password}     # CHANGE THIS or set environment variable
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
            required: true
          connectiontimeout: 5000
          timeout: 5000
          writetimeout: 5000

# ============================================
# FILE STORAGE
# ============================================
file:
  upload:
    directory: uploads

# ============================================
# JWT CONFIGURATION
# ============================================
# IMPORTANT: Change these values for production!
# Generate secure random keys using: 
# - openssl rand -base64 64
jwt:
  secret: CHANGE_THIS_TO_YOUR_SECRET_KEY_MIN_32_CHARS
  signerKey: "CHANGE_THIS_TO_YOUR_SIGNER_KEY_BASE64_ENCODED"
  expiration: 86400000 # 24 hours in milliseconds

# ============================================
# LOGGING
# ============================================
logging:
  level:
    com.storemanagement: DEBUG
    org.springframework.security: INFO

# ============================================
# PAYOS PAYMENT GATEWAY
# ============================================
# Setup Instructions:
# 1. Register at https://my.payos.vn
# 2. Get Client ID, API Key, Checksum Key from PayOS dashboard
# 3. Setup ngrok for webhook: ngrok http 8080
# 4. Update webhook URL in PayOS dashboard
payos:
  client-id: "YOUR_CLIENT_ID"           # CHANGE THIS
  api-key: "YOUR_API_KEY"                # CHANGE THIS
  checksum-key: "YOUR_CHECKSUM_KEY"      # CHANGE THIS
  webhook-url: "https://your-ngrok-url.ngrok.io/api/v1/payments/payos/webhook"  # CHANGE THIS
  return-url: "http://localhost:3000/payment/success"
  cancel-url: "http://localhost:3000/payment/cancel"
  environment: "sandbox"  # Options: sandbox, production
  base-url: "https://api-merchant.payos.vn"

# ============================================
# GHN (Giao Hàng Nhanh) SHIPPING
# ============================================
# Setup Instructions:
# 1. Register at https://khachhang.ghn.vn
# 2. Get Token API from Profile → Token API
# 3. Get Shop ID from Shop Management
# 4. Setup ngrok for webhook: ngrok http 8080
# 5. Update webhook URL in GHN dashboard
ghn:
  token: "YOUR_GHN_TOKEN"               # CHANGE THIS
  shop-id: 0                             # CHANGE THIS
  base-url: "https://dev-online-gateway.ghn.vn"
  webhook-url: "https://your-ngrok-url.ngrok.io/api/v1/ghn/webhook"  # CHANGE THIS
  enabled: true
  environment: "sandbox"  # Options: sandbox, production


