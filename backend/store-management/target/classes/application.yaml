server:
  port: 8080

spring:
  application:
    name: store-management

  datasource:
    url: jdbc:mysql://localhost:3306/store_management
    username: root
    password: 123456
    driver-class-name: com.mysql.cj.jdbc.Driver

  jpa:
    hibernate:
      ddl-auto: none # Cac cau lenh thay doi cau truc database khong duoc su dung
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQLDialect
        format_sql: true
    database-platform: org.hibernate.dialect.MySQL8Dialect

  # Flyway Configuration
  flyway:
    enabled: true
    baseline-on-migrate: true # Tự động baseline nếu database đã có dữ liệu
    locations: classpath:db/migration
    baseline-version: 0
    validate-on-migrate: false # Tạm thời tắt validation để fix lỗi checksum

  # File upload configuration
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 10MB

  # Email Configuration
  # Hướng dẫn cấu hình Gmail:
  # 1. Truy cập https://myaccount.google.com/security
  # 2. Bật "2-Step Verification"
  # 3. Tạo "App Password" tại https://myaccount.google.com/apppasswords
  # 4. Sử dụng App Password thay vì mật khẩu thật
  # 5. Cập nhật username và password bên dưới
  mail:
    host: smtp.gmail.com
    port: 587
    username: ${EMAIL_USERNAME:your-email@gmail.com}  # Thay bằng email của bạn hoặc set biến môi trường EMAIL_USERNAME
    password: ${EMAIL_PASSWORD:your-app-password}     # Thay bằng App Password hoặc set biến môi trường EMAIL_PASSWORD
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
            required: true
          connectiontimeout: 5000
          timeout: 5000
          writetimeout: 5000

# File storage configuration
file:
  upload:
    directory: uploads

# JWT Configuration
jwt:
  secret: storeManagementSecretKey12345678901234567890
  signerKey: "1TjXchw5FloESb63Kc+DFhTARvpWL4jUGCwfGWxuG5SIf/1y/LgJxHnMqaF6A/ij"
  expiration: 86400000 # 24 hours

# Logging
logging:
  level:
    com.storemanagement: DEBUG
    org.springframework.security: INFO

# PayOS Payment Gateway Configuration
# Lưu ý: Cần cập nhật các giá trị sau khi đăng ký tài khoản tại https://my.payos.vn
# Hướng dẫn:
# 1. Đăng ký tài khoản PayOS tại https://my.payos.vn
# 2. Lấy Client ID, API Key, Checksum Key từ PayOS dashboard
# 3. Cài đặt ngrok: ngrok http 8080
# 4. Copy ngrok HTTPS URL và cập nhật vào payos.webhook-url
# 5. Cập nhật webhook URL trong PayOS dashboard với ngrok URL
payos:
  client-id: "YOUR_CLIENT_ID"  # Thay bằng Client ID từ PayOS dashboard
  api-key: "YOUR_API_KEY"       # Thay bằng API Key từ PayOS dashboard
  checksum-key: "YOUR_CHECKSUM_KEY"  # Thay bằng Checksum Key từ PayOS dashboard
  webhook-url: "https://your-ngrok-url.ngrok.io/api/v1/payments/payos/webhook"  # URL nhận webhook từ PayOS (phải là HTTPS)
  return-url: "http://localhost:3000/payment/success"  # URL redirect sau khi thanh toán thành công (ReactJS frontend)
  cancel-url: "http://localhost:3000/payment/cancel"   # URL redirect khi hủy thanh toán (ReactJS frontend)
  environment: "sandbox"  # sandbox hoặc production
  base-url: "https://api-merchant.payos.vn"  # PayOS API base URL (sandbox)

# GHN (Giao Hàng Nhanh) Shipping Integration Configuration
# Lưu ý: Cần cập nhật các giá trị sau khi đăng ký tài khoản tại https://khachhang.ghn.vn
# Hướng dẫn:
# 1. Đăng ký tài khoản GHN tại https://khachhang.ghn.vn
# 2. Lấy Token API từ Thông tin cá nhân → Token API
# 3. Lấy Shop ID từ Quản lý cửa hàng
# 4. Cài đặt ngrok: ngrok http 8080
# 5. Copy ngrok HTTPS URL và cập nhật vào ghn.webhook-url
# 6. Cập nhật webhook URL trong GHN dashboard với ngrok URL
ghn:
  token: "YOUR_GHN_TOKEN"  # Thay bằng Token API từ GHN dashboard
  shop-id: 0  # Thay bằng Shop ID từ GHN dashboard
  base-url: "https://dev-online-gateway.ghn.vn"  # GHN API base URL (sandbox cho DEV)
  webhook-url: "https://your-ngrok-url.ngrok.io/api/v1/ghn/webhook"  # URL nhận webhook từ GHN (phải là HTTPS)
  enabled: true  # Feature flag: true để bật GHN, false để tắt (sử dụng mock)
  environment: "sandbox"  # sandbox (DEV) hoặc production
